openapi: 3.0.3
info:
  title: Chatter service describing the streaming features of goa v2.
  version: "1.0"
servers:
- url: http://localhost:80
  description: Default server for chatter
paths:
  /echoer:
    get:
      tags:
      - chatter
      summary: echoer chatter
      description: Echoes the message sent by the client.
      operationId: chatter#echoer
      responses:
        "101":
          description: Switching Protocols response.
          content:
            application/json:
              schema:
                type: string
                example: Ut fugiat facilis sed molestiae voluptas ut.
              example: Iste voluptatem ut.
        "401":
          description: Unauthorized response.
          content:
            application/json:
              schema:
                type: string
                example: Sequi tenetur.
              example: Sequi tenetur.
        "403":
          description: Forbidden response.
          content:
            application/json:
              schema:
                type: string
                example: Deleniti ea in.
              example: Deleniti ea in.
      security:
      - jwt_header_Authorization:
        - stream:read
        - stream:write
  /history:
    get:
      tags:
      - chatter
      summary: history chatter
      description: Returns the chat messages sent to the server.
      operationId: chatter#history
      parameters:
      - name: view
        in: query
        description: View to use to render the result
        allowEmptyValue: true
        schema:
          type: string
          description: View to use to render the result
          example: Soluta incidunt reiciendis et autem ut.
        example: Quo eaque suscipit necessitatibus facilis.
      responses:
        "101":
          description: Switching Protocols response.
          content:
            application/json:
              schema:
                description: 'Response body may alternatively be #/components/schemas/HistoryResponseBodyTiny'
                $ref: '#/components/schemas/ChatSummary'
              example:
                length: 3358802890094362607
                message: Qui voluptas accusantium est sequi vel nihil.
                sent_at: "2004-08-08T02:35:50Z"
        "401":
          description: Unauthorized response.
          content:
            application/json:
              schema:
                type: string
                example: Qui excepturi quia.
              example: Qui excepturi quia.
        "403":
          description: Forbidden response.
          content:
            application/json:
              schema:
                type: string
                example: Error nostrum minima.
              example: Error nostrum minima.
      security:
      - jwt_header_Authorization:
        - stream:read
        - stream:write
  /listener:
    get:
      tags:
      - chatter
      summary: listener chatter
      description: Listens to the messages sent by the client.
      operationId: chatter#listener
      responses:
        "101":
          description: Switching Protocols response.
        "401":
          description: Unauthorized response.
          content:
            application/json:
              schema:
                type: string
                example: Totam porro quis.
              example: Totam porro quis.
        "403":
          description: Forbidden response.
          content:
            application/json:
              schema:
                type: string
                example: Sit rerum sit et hic.
              example: Sit rerum sit et hic.
      security:
      - jwt_header_Authorization:
        - stream:read
        - stream:write
  /login:
    post:
      tags:
      - chatter
      summary: login chatter
      description: Creates a valid JWT token for auth to chat.
      operationId: chatter#login
      responses:
        "200":
          description: OK response.
          content:
            application/json:
              schema:
                type: string
                description: New JWT token
                example: Maiores nobis iusto sint.
              example: Et saepe aut.
        "401":
          description: Unauthorized response.
          content:
            application/json:
              schema:
                type: string
                example: Accusamus facere praesentium omnis voluptatem dolorum.
              example: Accusamus facere praesentium omnis voluptatem dolorum.
      security:
      - basic_header_Authorization: []
  /subscribe:
    get:
      tags:
      - chatter
      summary: subscribe chatter
      description: Subscribe to events sent when new chat messages are added.
      operationId: chatter#subscribe
      responses:
        "101":
          description: Switching Protocols response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Event'
              example:
                action: added
                added_at: "2007-10-25T23:17:05Z"
                message: Et quidem et neque accusantium provident.
        "401":
          description: Unauthorized response.
          content:
            application/json:
              schema:
                type: string
                example: Est est.
              example: Est est.
        "403":
          description: Forbidden response.
          content:
            application/json:
              schema:
                type: string
                example: Blanditiis amet quis quisquam.
              example: Blanditiis amet quis quisquam.
      security:
      - jwt_header_Authorization:
        - stream:read
        - stream:write
  /summary:
    get:
      tags:
      - chatter
      summary: summary chatter
      description: Summarizes the chat messages sent by the client.
      operationId: chatter#summary
      responses:
        "101":
          description: Switching Protocols response.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatSummaryResponseCollection'
              example:
              - length: 4832953061930875130
                message: Molestiae autem voluptatem voluptate autem incidunt.
                sent_at: "1970-05-07T05:21:01Z"
              - length: 4832953061930875130
                message: Molestiae autem voluptatem voluptate autem incidunt.
                sent_at: "1970-05-07T05:21:01Z"
              - length: 4832953061930875130
                message: Molestiae autem voluptatem voluptate autem incidunt.
                sent_at: "1970-05-07T05:21:01Z"
              - length: 4832953061930875130
                message: Molestiae autem voluptatem voluptate autem incidunt.
                sent_at: "1970-05-07T05:21:01Z"
        "401":
          description: Unauthorized response.
          content:
            application/json:
              schema:
                type: string
                example: Aspernatur consequatur ut.
              example: Aspernatur consequatur ut.
        "403":
          description: Forbidden response.
          content:
            application/json:
              schema:
                type: string
                example: Et vel in.
              example: Et vel in.
      security:
      - jwt_header_Authorization:
        - stream:read
        - stream:write
components:
  schemas:
    ChatSummary:
      type: object
      properties:
        length:
          type: integer
          description: Length of the message sent
          example: 7989922620706249567
          format: int64
        message:
          type: string
          description: Message sent to the server
          example: Accusamus est et ipsa ipsa et.
        sent_at:
          type: string
          description: Time at which the message was sent
          example: "1995-03-19T13:53:01Z"
          format: date-time
      example:
        length: 690981510320022082
        message: Non explicabo vero.
        sent_at: "2007-08-29T03:39:51Z"
      required:
      - message
      - sent_at
    ChatSummaryResponse:
      type: object
      properties:
        length:
          type: integer
          description: Length of the message sent
          example: 2740118441049891837
          format: int64
        message:
          type: string
          description: Message sent to the server
          example: Perspiciatis tenetur aut natus occaecati suscipit sapiente.
        sent_at:
          type: string
          description: Time at which the message was sent
          example: "1996-01-07T07:24:07Z"
          format: date-time
      description: ChatSummaryResponse result type (default view)
      example:
        length: 971226565362518647
        message: Dicta sit modi consequatur.
        sent_at: "2005-02-15T08:37:42Z"
      required:
      - message
      - sent_at
    ChatSummaryResponseCollection:
      type: array
      items:
        $ref: '#/components/schemas/ChatSummaryResponse'
      description: SummaryResponseBody is the result type for an array of ChatSummaryResponse
        (default view)
      example:
      - length: 4832953061930875130
        message: Molestiae autem voluptatem voluptate autem incidunt.
        sent_at: "1970-05-07T05:21:01Z"
      - length: 4832953061930875130
        message: Molestiae autem voluptatem voluptate autem incidunt.
        sent_at: "1970-05-07T05:21:01Z"
      - length: 4832953061930875130
        message: Molestiae autem voluptatem voluptate autem incidunt.
        sent_at: "1970-05-07T05:21:01Z"
    Event:
      type: object
      properties:
        action:
          type: string
          example: added
          enum:
          - added
        added_at:
          type: string
          description: Time at which the message was added
          example: "1983-01-01T21:21:33Z"
          format: date-time
        message:
          type: string
          description: Message sent to the server
          example: Provident tempore debitis.
      example:
        action: added
        added_at: "1970-02-16T00:44:00Z"
        message: Porro a voluptatibus ut earum nisi.
      required:
      - message
      - action
      - added_at
    HistoryResponseBodyTiny:
      type: object
      properties:
        message:
          type: string
          description: Message sent to the server
          example: Non temporibus possimus qui hic.
      description: HistoryResponseBody result type (tiny view)
      example:
        message: Modi quasi ipsa cupiditate itaque.
      required:
      - message
  securitySchemes:
    basic_header_Authorization:
      type: http
      description: Secures the login endpoint.
      scheme: basic
    jwt_header_Authorization:
      type: http
      description: Secures endpoint by requiring a valid JWT token. Supports scopes
        "stream:read" and "stream:write".
      scheme: bearer
tags:
- name: chatter
  description: The chatter service implements a simple client and server chat.
